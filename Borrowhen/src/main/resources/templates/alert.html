<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Toast Fragments</title>
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- ✅ SUCCESS TOAST -->
    <div th:fragment="success" class="toast success active" id="toast-success">
      <div class="toast-content">
        <i class="fas fa-check check"></i>
        <div class="message">
          <span class="text text-1">Success</span>
          <span class="text text-2" th:text="${sucessMsg}"></span>
        </div>
      </div>
      <i class="fa-solid fa-xmark close"></i>
      <div class="progress active"></div>

      <script>
        (() => {
          const toast = document.querySelector("#toast-success");
          const closeIcon = toast.querySelector(".close");
          const progress = toast.querySelector(".progress");
          let timer1, timer2;

          // Automatically hide after 5s
          timer1 = setTimeout(() => {
            toast.classList.remove("active");
          }, 5000);

          // End progress bar slightly after
          timer2 = setTimeout(() => {
            progress.classList.remove("active");
          }, 5300);

          // Close icon behavior
          closeIcon.addEventListener("click", () => {
            toast.classList.remove("active");
            setTimeout(() => {
              progress.classList.remove("active");
            }, 300);
            clearTimeout(timer1);
            clearTimeout(timer2);
          });
        })();
      </script>
    </div>

    <!-- ❌ ERROR TOAST -->
    <div th:fragment="error" class="toast error active" id="toast-error">
      <div class="toast-content">
        <i class="fas fa-times check"></i>
        <div class="message">
          <span class="text text-1">Error</span>
          <span class="text text-2" th:text="${errorMsg}">Something went wrong</span>
        </div>
      </div>
      <i class="fa-solid fa-xmark close"></i>
      <div class="progress active"></div>

      <script>
        (() => {
          const toast = document.querySelector("#toast-error");
          const closeIcon = toast.querySelector(".close");
          const progress = toast.querySelector(".progress");
          let timer1, timer2;

          // Automatically hide after 5s
          timer1 = setTimeout(() => {
            toast.classList.remove("active");
          }, 5000);

          // End progress bar slightly after
          timer2 = setTimeout(() => {
            progress.classList.remove("active");
          }, 5300);

          // Close icon behavior
          closeIcon.addEventListener("click", () => {
            toast.classList.remove("active");
            setTimeout(() => {
              progress.classList.remove("active");
            }, 300);
            clearTimeout(timer1);
            clearTimeout(timer2);
          });
        })();
      </script>
    </div>
  </body>
</html>
